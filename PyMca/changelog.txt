VERSION 4.0.4

- Add the possibility to save graphics in vectorial format (svg).

- Scale print preview to have a width equal to 50% of the page width.

- Solve a problem in specfile batches when dealing with the @CHANN entry.

- Correct ROI image colormap bug in ROI imaging tool.

- Add specfile support to the ROI imaging tool.

- Correct random crashes on startup and on specfile batches.

VERSION 4.0.3

- Correct a bug in the ROI imaging tool. 
  If the first channel was different from 0, there was an offset in each ROI.

- Windows: Correct a bug making the applications crash on startup.

- Speed up fit configuration dialog. It was awfully slow since version 3.9.4 Qt4.

- Linux: Matplotlib saving of graphics working in the binary release also under (K)Ubuntu.
  (It was already the case in pymca4.0.2-linux-p1.tgz)

VERSION 4.0.2

- Allow the user to choose if the data have to be weighted during the fit.

- Correct a bug only affecting linear batches: areas and concentrations were smaller by
a factor 10000. The bug was introduced in version 4.0.0

- Faster concentrations calculation.

- Concentrations calculated on batches do not force the generation of the .fit files.

- Linux: sps library made locale independent.

VERSION 4.0.1

- Plotting under windows should be faster.

- Solved a small memory leak usign the strip background.

- Advanced fit config button reported not to work on a gentoo 64-bit system when building PyMCA from source. Corrected.

VERSION 4.0.0

- Simplify batch preparation.
  After a fit, you can load the non-linear parameters from last fit into the configuration just by pressing a button.

- Huge speed up of pure imaging batches (specially linear fits).

- Possibility to save the imaging tool generated images in ASCII and EDF formats besides pure graphical formats.

- Display (X, Y, Z) coordenates in EDF viewers.

- Mark selected peaks in fit window, not in the main McaWindow.

- The windows installation allows to keep the old 3.9.4 version (ESRF)installed. 
  That windows version can be downloaded from the ESRF. It has less features but a faster interface. 
  Physics is not changed and files generated by the 3.9.4 version can be used with this version.

- Repeated HTML reports were incorrectly visualized.

- Correct a memory leak in the specfile library.

- Speed up sequential mca readout in specfile library.

- Batch pause button is working now.

- Force a main McaWindow plot and calibration update after a fit.

- Solve a Windows XP specific problem. 
  The peak selection buttons were not coloured under some windows theme configurations.


VERSION 3.9.4 Qt4

- Publication quality graphics thru matplotlib. 
  The packages are so big in part because of matplotlib.

- Qt4 support. I will drop Qt3 in future releases.
  Latest windows versions now available from sourceforge and not from the ESRF.

- Universal support for Mac.

- Started to add imaging tools (ESRF Data Format file stacks for the time being).

- Added an RGB correlator to easily find correlations among elements.
  This tool is to be used after a batch (Qt4 only).
  It can be used with previous batch results.

- Image printing added.

- Error when working with Nd element fixed.

- Incomplete legends in plots solved (Mac-i386)
 
- Missing features:
  Some previous features have not been ported to PyQt4 yet.
  If you need them please, keep the older version till I add them. 
  The Physics has NOT changed. I kept the 3.9.4 to make it clear..

- New tools can be accessed thru the PyMCA Tools menu.

VERSION 3.9.4

- Possibility to fit separately K-alpha and K-beta lines.

- Possibility to use alternative L shell ratios.

- Ebel's work reference corrected

- Long standing bug affecting the fit of L and M lines as a group corrected.

VERSION 3.9.3

- Add automatic x-ray tube weighted profile generation following Ebel's formulae.

- Consider scatter of more than just one excitation energy.

- Take into account peaks outside the fitting region if  at least one of its escape lines falls into the fitting region.
  Particularly important for Germanium detectors where the K escape lines are far from the excitation energy.

- Starting pile-up parameter changed from 1.0e-10 to 1.0e-8

- The rhodium density was wrong. Changed.

- Solved a problem affecting the calibration in qt 2.3.0.

- Solved a program crash in qt 2.3.0 when Matrix Spectrum of a bad or non existing matrix was requested.

- Solved a program crash loading the shell configuration files. The problem affected some Intel based Macs (not all).

VERSION 3.9.2

- It corrects a bug affecting EDF files: The ADD REMOVE REPLACE buttons were not working.

- The default short tail slope is set to 0.5

- The peaks tailing information was missing in the HTML Report. It should be there now.

- It exposes all the theoretical shell constants in ASCII files. 
  This allows the end user to customize the theoretical values by editing the relevant files:
         KShellRates.dat
         KShellConstants.dat
         LShellRates.dat
         LShellConstants.dat
         MShellRates.dat
         MShellConstants.dat

VERSION 3.9.1

- Huge batch fitting speed up in case the user does not generate the .fit files

VERSION 3.9.0

- Possibility to perform linear fits. That can improve batch fitting speed.

- Solved a long standing problem with the L lines of Sb, I, Cs, Ba, La, Ce, Pr and Nd. 
  Problem was due to a bad transcription of the used theoretical data.

- The elements info shows energy dependent L and M ratios.
  Nothing changes for the fit. Just the information is shown.
